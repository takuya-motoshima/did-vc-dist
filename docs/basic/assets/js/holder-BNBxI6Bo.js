import"./style-D-PBLulJ.js";import{g as s,i as c,s as o,c as m,a as r,r as u}from"./vcManager-BMuxMvip.js";const y=async e=>{e.preventDefault();const n=e.target;if(!n.checkValidity()){n.classList.add("was-validated");return}c();const t=document.getElementById("fullName").value.trim(),d=document.getElementById("birthDate").value,a=document.getElementById("address").value.trim(),i=document.querySelector('input[name="gender"]:checked').nextElementSibling.textContent;await o();const l=m({name:t,birth:d,address:a,gender:i});document.getElementById("vc-name").textContent=t,document.getElementById("vc-birth").textContent=new Date(d).toLocaleDateString("ja-JP"),document.getElementById("vc-address").textContent=a,document.getElementById("vc-gender").textContent=i,document.getElementById("application-form").style.display="none",document.getElementById("credentials-list").style.display="block",r(l)||alert("VC保存に失敗しました。再度お試しください。")},g=()=>{document.getElementById("credentials-list").style.display="none",document.getElementById("application-form").style.display="block",u()},v=()=>{["fullName","birthDate","address"].forEach(n=>{const t=document.getElementById(n);t.addEventListener("input",()=>{t.value.trim()?(t.classList.remove("is-invalid"),t.classList.add("is-valid")):(t.classList.remove("is-valid"),t.closest("form").classList.contains("was-validated")&&t.classList.add("is-invalid"))})})};document.getElementById("vc-application-form").addEventListener("submit",y);document.getElementById("reset-btn").addEventListener("click",g);v();window.addEventListener("DOMContentLoaded",()=>{const e=s();e&&e.credentialSubject&&(document.getElementById("vc-name").textContent=e.credentialSubject.name,document.getElementById("vc-birth").textContent=new Date(e.credentialSubject.birthDate).toLocaleDateString("ja-JP"),document.getElementById("vc-address").textContent=e.credentialSubject.address,document.getElementById("vc-gender").textContent=e.credentialSubject.gender,document.getElementById("application-form").style.display="none",document.getElementById("credentials-list").style.display="block")});
